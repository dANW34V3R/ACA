MOV R26 #45  WIDTH
MOV R27 #45  HEIGHT
MOV R28 #44  X
MOV R29 #44  Y
MOV R20 #2   2
MOV R21 #1
MOV R22 #0
loopy:
SUB R29 #1
MOV R28 #44  X
loopx:
SUB R28 #1
MUL R15 R29 R26
ADD R15 R15 R28  CENTRAL PIXEL ARR POS
LDR R3 [R15 #-1]
LDR R4 [R15 #0]
LDR R5 [R15 #1]
SUB R15 R15 R26  TOP CENTRE PIXEL ARR POS
LDR R0 [R15 #-1]
LDR R1 [R15 #0]
LDR R2 [R15 #1]
ADD R15 R15 R26
ADD R15 R15 R26  BOTTOM CENTRE PIXEL ARR POS
LDR R6 [R15 #-1]
LDR R7 [R15 #0]
LDR R8 [R15 #1]
SUB R11 R5 R3   X = (2-0) + 2*(5-3) + (8-6)
MUL R11 R11 R20
SUB R10 R2 R0
SUB R12 R8 R6
ADD R13 R10 R12
ADD R13 R13 R11
SUB R11 R1 R7   Y = (0-6) + 2*(1-7) + (2-8)
MUL R11 R11 R20
SUB R10 R0 R6
SUB R12 R2 R8
ADD R14 R10 R12
ADD R14 R13 R11
ADD R16 R13 R14
SUB R15 R15 R26
STR R16 [R15 #2025]
CMP R28 R21
BGT loopx
CMP R29 R21
BGT loopy
HALT
CMP R16 R22
BGT pos
SUB R16 R22 R16
pos: